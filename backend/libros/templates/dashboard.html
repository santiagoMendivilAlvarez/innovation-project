{% extends 'utils/base.html' %}
{% load static %}

{% block title %}Dashboard - BookieWookie{% endblock %}

{% block content %}
<div class="main-container">
    <div class="hero-section">
        <h1 class="hero-title">Encuentra el mejor precio</h1>
        <p class="hero-subtitle">
            para cualquier libro que busques<br>
            Comparamos precios de los mejores sitios en l√≠nea de venta de libros para que encuentres y 
            compres libros al mejor precio disponible en el mercado.
        </p>
        
         <div class="search-section">
             <form class="search-form" method="GET" action="{% url 'book_search' %}" id="dashboardSearchForm">
                 <div class="search-input-container">
                     <input type="text" class="search-input-text" placeholder="¬øQu√© libro est√°s buscando?" name="search" value="{{ request.GET.search|default:'' }}" required>
                 </div>
                 <button type="submit" class="search-text-btn">Buscar libro</button>
             </form>
         </div>
    </div>

    <div class="stats-section">
        <div class="stat-card">
            <span class="stat-number">45,000+</span>
            <div class="stat-label">Libros disponibles</div>
        </div>
        <div class="stat-card">
            <span class="stat-number">$850M</span>
            <div class="stat-label">en ahorros</div>
            <div class="stat-subtitle">generados</div>
        </div>
        <div class="stat-card">
            <span class="stat-number">50+</span>
            <div class="stat-label">tiendas</div>
            <div class="stat-subtitle">comparadas</div>
        </div>
        <div class="stat-card">
            <span class="stat-number">24/7</span>
            <div class="stat-label">servicio</div>
            <div class="stat-subtitle">actualizado</div>
        </div>
    </div>

    <div class="features-section">
        <h2 class="features-title">¬øPor qu√© elegir BookieWookie?</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üìö</div>
                <h3 class="feature-title">Comparaci√≥n inteligente</h3>
                <p class="feature-description">
                    Analizamos precios de m√∫ltiples tiendas para encontrar las mejores ofertas disponibles en tiempo real.
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title">B√∫squeda avanzada</h3>
                <p class="feature-description">
                    Encuentra exactamente lo que necesitas con filtros por categor√≠a, precio, autor y disponibilidad.
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìÖ</div>
                <h3 class="feature-title">Alertas de precio</h3>
                <p class="feature-description">
                    Recibe notificaciones cuando el libro que quieres baje de precio o est√© disponible con descuento.
                </p>
            </div>
        </div>
    </div>

    <!-- Show default content -->
    <div class="books-section">
        <div class="section-header">
            <h2 class="section-title">Los libros mas recientes</h2>
            <a href="{% url "libros" %}" class="view-all-btn">Ver m√°s</a>
        </div>

        <div class="books-grid">
            {% if last_ten_books %}
                {% for book in last_ten_books %}
                    <div class="book-card">
                        <div class="book-cover" style="background: linear-gradient(135deg, #4caf50, #2e7d32);">üìñ</div>
                        <div class="book-info">
                            <h4 class="book-title">{{ book.titulo }}</h4>
                            <p class="book-author">{{ book.autor }}</p>
                            <span class="book-category">{{ book.categoria.nombre }}</span>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="row d-flex">
                    <div class="col-md-12 col-lg-12 col-sm-12 text-center">
                        <h3>
                        No books available
                        </h3>
                    </div>
                </div>
            {% endif %}
            
        </div>
    </div>
    {% if not request.user.is_authenticated %}
    <div class="cta-section">
        <h2 class="cta-title">¬øListo para empezar a ahorrar?</h2>
        <p class="cta-subtitle">
            √önete a miles de lectores que ya est√°n ahorrando en sus libros favoritos
        </p>
        <div class="cta-buttons">
            <a href="/register/" class="btn btn-white">Registrarse</a>
            <a href="/login/" class="btn btn-transparent">Iniciar Sesi√≥n</a>
        </div>
    </div>
    {% endif %}
 </div>
 {% if request.user.is_authenticated %}
 {% include 'chatbot.html' %}
 {% endif %}
 
 
 <script>
 document.addEventListener('DOMContentLoaded', function() {
     const searchForm = document.getElementById('dashboardSearchForm');
     if (searchForm) {
         searchForm.addEventListener('submit', function(e) {
             if (this.method.toLowerCase() !== 'get') {
                 this.method = 'GET';
             }
         });
     }
 });
 </script>
 {% endblock %}